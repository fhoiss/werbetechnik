<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modal Debug Test</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body { padding: 20px; font-family: Arial, sans-serif; }
        .debug { background: #f0f0f0; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .debug h3 { margin-top: 0; }
        button { padding: 10px 20px; margin: 5px; font-size: 16px; cursor: pointer; }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
    </style>
</head>
<body>
    <h1>ðŸ” Cookie-Modal Debug</h1>

    <div class="debug">
        <h3>Schritt 1: Elemente prÃ¼fen</h3>
        <button onclick="checkElements()">Elemente prÃ¼fen</button>
        <div id="element-status"></div>
    </div>

    <div class="debug">
        <h3>Schritt 2: Modal manuell Ã¶ffnen</h3>
        <button onclick="forceOpenModal()">Modal ZWANGSWEISE Ã¶ffnen</button>
        <button onclick="forceCloseModal()">Modal schlieÃŸen</button>
    </div>

    <div class="debug">
        <h3>Schritt 3: Event Listener prÃ¼fen</h3>
        <button onclick="testEventListeners()">Event Listener testen</button>
        <div id="listener-status"></div>
    </div>

    <div class="debug">
        <h3>Schritt 4: Settings-Button klicken</h3>
        <button onclick="clickSettingsButton()">Settings-Button simulieren</button>
        <div id="click-status"></div>
    </div>

    <!-- Footer wird hier geladen -->
    <div id="footer-placeholder"></div>

    <!-- Main JS -->
    <script src="main.js"></script>

    <!-- Debug Scripts -->
    <script>
        function checkElements() {
            const output = document.getElementById('element-status');
            output.innerHTML = '<h4>Element-Status:</h4>';

            const banner = document.getElementById('cookie-banner');
            const modal = document.getElementById('cookie-modal');
            const settingsBtn = document.getElementById('cookie-settings-open');
            const closeBtn = document.getElementById('cookie-modal-close');
            const saveBtn = document.getElementById('cookie-save-settings');

            output.innerHTML += banner ? '<p class="success">âœ“ Banner gefunden</p>' : '<p class="error">âœ— Banner FEHLT</p>';
            output.innerHTML += modal ? '<p class="success">âœ“ Modal gefunden</p>' : '<p class="error">âœ— Modal FEHLT</p>';
            output.innerHTML += settingsBtn ? '<p class="success">âœ“ Settings-Button gefunden</p>' : '<p class="error">âœ— Settings-Button FEHLT</p>';
            output.innerHTML += closeBtn ? '<p class="success">âœ“ Close-Button gefunden</p>' : '<p class="error">âœ— Close-Button FEHLT</p>';
            output.innerHTML += saveBtn ? '<p class="success">âœ“ Save-Button gefunden</p>' : '<p class="error">âœ— Save-Button FEHLT</p>';

            if (modal) {
                const styles = window.getComputedStyle(modal);
                output.innerHTML += '<p>Modal Display: <strong>' + styles.display + '</strong></p>';
                output.innerHTML += '<p>Modal Z-Index: <strong>' + styles.zIndex + '</strong></p>';
                output.innerHTML += '<p>Modal hat .active: <strong>' + modal.classList.contains('active') + '</strong></p>';
            }
        }

        function forceOpenModal() {
            const modal = document.getElementById('cookie-modal');
            if (modal) {
                modal.classList.add('active');
                console.log('Modal wurde mit .active Klasse versehen');
                alert('Modal sollte jetzt sichtbar sein! Wenn nicht, ist das CSS das Problem.');
            } else {
                alert('Modal Element nicht gefunden!');
            }
        }

        function forceCloseModal() {
            const modal = document.getElementById('cookie-modal');
            if (modal) {
                modal.classList.remove('active');
                console.log('Modal wurde geschlossen');
            }
        }

        function testEventListeners() {
            const output = document.getElementById('listener-status');
            output.innerHTML = '<h4>Event Listener Test:</h4>';

            const settingsBtn = document.getElementById('cookie-settings-open');

            if (settingsBtn) {
                // PrÃ¼fe ob bereits Listener vorhanden
                const listeners = getEventListeners ? getEventListeners(settingsBtn) : null;

                output.innerHTML += '<p class="success">âœ“ Settings-Button existiert</p>';

                // FÃ¼ge Test-Listener hinzu
                settingsBtn.addEventListener('click', function testListener() {
                    output.innerHTML += '<p class="success">âœ“âœ“âœ“ KLICK FUNKTIONIERT! Event Listener aktiv!</p>';
                    console.log('Test-Listener wurde ausgelÃ¶st');
                }, { once: true });

                output.innerHTML += '<p>Test-Listener hinzugefÃ¼gt. Klicke auf "Einstellungen" im Cookie-Banner!</p>';
            } else {
                output.innerHTML += '<p class="error">âœ— Settings-Button nicht gefunden</p>';
            }
        }

        function clickSettingsButton() {
            const output = document.getElementById('click-status');
            const settingsBtn = document.getElementById('cookie-settings-open');

            if (settingsBtn) {
                output.innerHTML = '<p>Klicke Settings-Button programmatisch...</p>';
                settingsBtn.click();

                setTimeout(() => {
                    const modal = document.getElementById('cookie-modal');
                    if (modal && modal.classList.contains('active')) {
                        output.innerHTML += '<p class="success">âœ“âœ“âœ“ ERFOLG! Modal wurde geÃ¶ffnet!</p>';
                    } else {
                        output.innerHTML += '<p class="error">âœ— Modal wurde NICHT geÃ¶ffnet</p>';
                        output.innerHTML += '<p>MÃ¶glicherweise sind Event Listener noch nicht registriert.</p>';
                    }
                }, 200);
            } else {
                output.innerHTML = '<p class="error">âœ— Settings-Button nicht gefunden</p>';
            }
        }

        // Automatischer Check nach 2 Sekunden
        setTimeout(() => {
            console.log('=== Automatischer Element-Check ===');
            checkElements();
        }, 2000);

        // Warte auf Footer-Laden und teste dann erneut
        setTimeout(() => {
            console.log('=== Erneuter Check nach 3 Sekunden ===');
            checkElements();
        }, 3000);
    </script>
</body>
</html>
