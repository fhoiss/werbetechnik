<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookie-Banner Debug Test</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        .debug-info {
            background: #f0f0f0;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .debug-info h2 {
            margin-top: 0;
        }
        .status {
            padding: 5px 10px;
            border-radius: 3px;
            display: inline-block;
            margin: 5px 0;
        }
        .status.success { background: #4CAF50; color: white; }
        .status.error { background: #f44336; color: white; }
        .status.warning { background: #ff9800; color: white; }
        #test-buttons {
            margin: 20px 0;
        }
        #test-buttons button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>ðŸª Cookie-Banner Debug Test</h1>

    <div class="debug-info">
        <h2>Status Check</h2>
        <div id="debug-output"></div>
    </div>

    <div id="test-buttons">
        <button onclick="testBannerExists()">1. Banner HTML prÃ¼fen</button>
        <button onclick="testInitFunction()">2. Init-Funktion prÃ¼fen</button>
        <button onclick="forceShowBanner()">3. Banner ZWANGSWEISE anzeigen</button>
        <button onclick="checkCSS()">4. CSS prÃ¼fen</button>
        <button onclick="clearCookies()">5. Cookies lÃ¶schen & neu laden</button>
    </div>

    <!-- Footer wird hier geladen -->
    <div id="footer-placeholder"></div>

    <!-- Main JS -->
    <script src="main.js"></script>

    <!-- Debug Scripts -->
    <script>
        function log(message, type = 'info') {
            const output = document.getElementById('debug-output');
            const statusClass = type === 'success' ? 'success' : type === 'error' ? 'error' : 'warning';
            output.innerHTML += '<div class="status ' + statusClass + '">' + message + '</div><br>';
        }

        function testBannerExists() {
            document.getElementById('debug-output').innerHTML = '';
            log('Teste Cookie-Banner HTML...', 'info');

            const banner = document.getElementById('cookie-banner');
            const modal = document.getElementById('cookie-modal');
            const acceptBtn = document.getElementById('cookie-accept-all');
            const declineBtn = document.getElementById('cookie-decline-all');
            const settingsBtn = document.getElementById('cookie-settings-open');

            if (banner) {
                log('âœ“ Banner Element gefunden', 'success');
                log('Banner display: ' + window.getComputedStyle(banner).display, 'info');
                log('Banner hat .active Klasse: ' + banner.classList.contains('active'), 'info');
            } else {
                log('âœ— Banner Element NICHT gefunden!', 'error');
            }

            if (modal) log('âœ“ Modal Element gefunden', 'success');
            else log('âœ— Modal Element NICHT gefunden', 'error');

            if (acceptBtn) log('âœ“ Accept Button gefunden', 'success');
            else log('âœ— Accept Button NICHT gefunden', 'error');

            if (declineBtn) log('âœ“ Decline Button gefunden', 'success');
            else log('âœ— Decline Button NICHT gefunden', 'error');

            if (settingsBtn) log('âœ“ Settings Button gefunden', 'success');
            else log('âœ— Settings Button NICHT gefunden', 'error');
        }

        function testInitFunction() {
            document.getElementById('debug-output').innerHTML = '';
            log('Teste initCookieBanner Funktion...', 'info');

            if (typeof window.initCookieBanner === 'function') {
                log('âœ“ initCookieBanner ist definiert', 'success');
                try {
                    window.initCookieBanner();
                    log('âœ“ initCookieBanner() wurde aufgerufen', 'success');
                } catch(e) {
                    log('âœ— Fehler beim Aufruf: ' + e.message, 'error');
                }
            } else {
                log('âœ— initCookieBanner ist NICHT definiert!', 'error');
            }
        }

        function forceShowBanner() {
            document.getElementById('debug-output').innerHTML = '';
            log('Zeige Banner zwangsweise an...', 'warning');

            const banner = document.getElementById('cookie-banner');
            if (banner) {
                banner.classList.add('active');
                banner.style.display = 'block';
                log('âœ“ Banner sollte jetzt sichtbar sein!', 'success');
            } else {
                log('âœ— Banner Element nicht gefunden', 'error');
            }
        }

        function checkCSS() {
            document.getElementById('debug-output').innerHTML = '';
            log('PrÃ¼fe CSS...', 'info');

            const banner = document.getElementById('cookie-banner');
            if (banner) {
                const styles = window.getComputedStyle(banner);
                log('Display: ' + styles.display, 'info');
                log('Position: ' + styles.position, 'info');
                log('Z-Index: ' + styles.zIndex, 'info');
                log('Bottom: ' + styles.bottom, 'info');
                log('Background: ' + styles.backgroundColor, 'info');
            } else {
                log('âœ— Banner nicht im DOM', 'error');
            }
        }

        function clearCookies() {
            document.getElementById('debug-output').innerHTML = '';
            log('LÃ¶sche Cookie und lade neu...', 'warning');
            document.cookie = 'hoiss_cookie_consent=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
            setTimeout(() => location.reload(), 500);
        }

        // Automatischer Test nach 2 Sekunden
        setTimeout(() => {
            log('=== AUTOMATISCHER START-TEST ===', 'warning');
            testBannerExists();
        }, 2000);
    </script>
</body>
</html>
